---
tags:
- algorithms/probabilistic
- data-structures/streaming
- big-data/cardinality
- algorithms/estimation
- computer-science/algorithms
- data-processing/streaming
---

# HyperLogLog Algorithm

## Overview

**HyperLogLog** is a probabilistic algorithm for estimating the number of **unique elements** in a large dataset or stream. It's extremely memory-efficient, allowing for processing of large data volumes with accurate estimation using minimal memory.

## Core Problem

Estimation of set cardinality $|A|$ (number of unique elements in dataset $A$) without storing all elements.

## Key Advantages

### 1. Memory Efficiency üíæ

- Uses approximately $1.5 \log_2(\log_2(n))$ bits
- For 1 billion elements, only needs 1.5 KB of memory
- üîó [Memory Efficient Algorithms](Memory Efficient Algorithms "wikilink")

### 2. Processing Speed ‚ö°

- Operates in streaming mode
- $O(1)$ complexity for adding elements
- üîó [Stream Processing](Stream Processing "wikilink")

### 3. Probabilistic Nature üé≤

- High accuracy with controllable deviation
- üîó [Probabilistic Algorithms](Probabilistic Algorithms "wikilink")

## Working Principle

### 1. Core Concept

The algorithm uses hashing to transform elements into numerical values. Instead of storing unique values, HyperLogLog analyzes hash distributions for cardinality estimation.

### 2. Hash Distribution

1.  Uses hash function $h(x)$ mapping elements to large range ($h: x \to \{0, 1\}^L$)
2.  Analyzes leading zeros in hash:
    - Example: $h(x_1) = 001011$ (two leading zeros)
    - Example: $h(x_2) = 000110$ (three leading zeros)
3.  Number of leading zeros indicates set size

### 3. Data Partitioning

- Divides hash space into $m$ levels (registers)
- Each register analyzes part of the stream
- üîó [Data Partitioning](Data Partitioning "wikilink")

## Algorithm Steps

### 1. Element Hashing üîÑ

- Convert each element $x$ to $h(x)$

### 2. Register Division

- Split into $m$ registers using lower bits
- Use upper bits for zero counting

### 3. Prefix Counting

- Store maximum leading zeros per register

### 4. Size Estimation

- Use harmonic mean with correction factors

## Mathematical Foundation

### Cardinality Estimation

The main formula:
$E = \alpha_m \cdot m^2 \cdot \left(\sum_{j=1}^m 2^{-M[j]}\right)^{-1}$

Where:
- $m$: register count
- $M[j]$: maximum zeros in register $j$
- $\alpha_m$: correction factor based on $m$

### Corrections

1.  **Small Sets**: Linear correction when $E < 2.5m$
2.  **Large Sets**: Logarithmic correction when $E > 2^{32}$

## Implementation

``` python
import hashlib
import math

class HyperLogLog:
    def __init__(self, b):
        self.b = b  # Number of bits for registers
        self.m = 1 << b  # Number of registers
        self.registers = [0] * self.m
        self.alpha_m = self._get_alpha_m()

    def _get_alpha_m(self):
        if self.m == 16:
            return 0.673
        elif self.m == 32:
            return 0.697
        elif self.m == 64:
            return 0.709
        else:
            return 0.7213 / (1 + 1.079 / self.m)

    def _hash(self, value):
        h = hashlib.md5(value.encode('utf8')).hexdigest()
        return int(h, 16)

    def add(self, value):
        x = self._hash(value)
        j = x & (self.m - 1)  # Register determination
        w = x >> self.b  # Upper bits
        self.registers[j] = max(self.registers[j], self._rho(w))

    def _rho(self, w):
        return len(bin(w)) - len(bin(w).rstrip('0'))

    def estimate(self):
        Z = sum(2.0 ** -r for r in self.registers)
        E = self.alpha_m * self.m ** 2 / Z

        # Small range correction
        if E <= 2.5 * self.m:
            V = self.registers.count(0)
            if V > 0:
                E = self.m * math.log(self.m / V)

        # Large range correction
        if E > 1 / 30.0 * 2 ** 32:
            E = -(2 ** 32) * math.log(1 - E / 2 ** 32)

        return E
```

## Practical Applications

### 1. Big Data Analytics üìä

- Unique user counting
- Real-time interaction analysis
- üîó [Big Data Analytics](Big Data Analytics "wikilink")

### 2. Databases üíæ

- Index optimization
- Unique key estimation
- üîó [Database Optimization](Database Optimization "wikilink")

### 3. Search Systems üîç

- Unique result counting
- Query optimization
- üîó [Search Optimization](Search Optimization "wikilink")

### 4. Network Traffic üåê

- Connection analysis
- Packet monitoring
- üîó [Network Analysis](Network Analysis "wikilink")

## Related Topics

- [Probabilistic Data Structures](Probabilistic Data Structures "wikilink")
- [Stream Processing Algorithms](Stream Processing Algorithms "wikilink")
- [Cardinality Estimation](Cardinality Estimation "wikilink")
- [Hash Functions](Hash Functions "wikilink")
- [Big Data Processing](Big Data Processing "wikilink")

## Additional Resources

- üìö [Probabilistic Algorithms Theory](Probabilistic Algorithms Theory "wikilink")
- üîß [Stream Processing Tools](Stream Processing Tools "wikilink")
- üìä [Data Estimation Methods](Data Estimation Methods "wikilink")
- üéì [Algorithm Analysis](Algorithm Analysis "wikilink")

\#algorithms/probabilistic \#data-structures/streaming \#big-data/cardinality \#algorithms/estimation \#computer-science/algorithms \#data-processing/streamingata-processing/streaming

------------------------------------------------------------------------

# Blended

## –î–µ—Ç–∞–ª—å–Ω–µ –∑–∞–Ω—è—Ç—Ç—è –Ω–∞ —Ç–µ–º—É "HyperLogLog"

\#algorithms \#data-structures \#computer-science \#hyperloglog \#big-data \#probability \#cardinality-estimation

## –¶—ñ–ª—å –∑–∞–Ω—è—Ç—Ç—è

- –û–∑–Ω–∞–π–æ–º–∏—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ —ñ–∑ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º HyperLogLog (HLL) –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –ø–æ—Ç–æ—Ü—ñ –¥–∞–Ω–∏—Ö
- –†–æ–∑–≥–ª—è–Ω—É—Ç–∏ —Ç–µ–æ—Ä–µ—Ç–∏—á–Ω—É –æ—Å–Ω–æ–≤—É, –∫–ª—é—á–æ–≤—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó —Ç–∞ –ø—Ä–∞–∫—Ç–∏—á–Ω—É —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—é
- –ù–∞–≤—á–∏—Ç–∏ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ HLL –¥–ª—è –∑–∞–¥–∞—á —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–≤—ñ—Ç—É —Ç–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∞–ª–≥–æ—Ä–∏—Ç–º—É

## –ü–ª–∞–Ω –∑–∞–Ω—è—Ç—Ç—è

### 1. –¢–µ–æ—Ä–µ—Ç–∏—á–Ω–∏–π –±–ª–æ–∫ (15 —Ö–≤–∏–ª–∏–Ω)

#### 1.1 –©–æ —Ç–∞–∫–µ HyperLogLog?

- HyperLogLog --- —Ü–µ –∞–ª–≥–æ—Ä–∏—Ç–º, –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –ø—Ä–∏–±–ª–∏–∑–Ω–æ–≥–æ –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –≤–µ–ª–∏–∫–æ–º—É –ø–æ—Ç–æ—Ü—ñ –¥–∞–Ω–∏—Ö
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π –æ–±—Å—è–≥ –ø–∞–º'—è—Ç—ñ, –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ä–æ–∑–º—ñ—Ä—É –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö

#### 1.2 –û—Å–Ω–æ–≤–Ω–∞ —ñ–¥–µ—è –∞–ª–≥–æ—Ä–∏—Ç–º—É

- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ö–µ—à-—Ñ—É–Ω–∫—Ü—ñ–π –¥–ª—è —Ä—ñ–≤–Ω–æ–º—ñ—Ä–Ω–æ–≥–æ —Ä–æ–∑–ø–æ–¥—ñ–ª—É –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
- –ó–∞–ø–∏—Å –∑–Ω–∞—á–µ–Ω—å —É "—Ä–µ–≥—ñ—Å—Ç—Ä–∞—Ö" –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞–π–±—ñ–ª—å—à–æ–≥–æ –ø–æ—Ä—è–¥–∫—É –Ω—É–ª—ñ–≤ —É —Ö–µ—à–æ–≤–∞–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω–Ω—è—Ö
- –û—Ü—ñ–Ω–∫–∞ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —á–µ—Ä–µ–∑ –≥–∞—Ä–º–æ–Ω—ñ–π–Ω–µ —Å–µ—Ä–µ–¥–Ω—î

#### 1.3 –ö–ª—é—á–æ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

- **–•–µ—à-—Ñ—É–Ω–∫—Ü—ñ—è:** –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç —É —á–∏—Å–ª–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è
- **–†–µ–≥—ñ—Å—Ç—Ä–∏:** –ú–∞—Å–∏–≤, —è–∫–∏–π –∑–±–µ—Ä—ñ–≥–∞—î –ø–æ–∑–∏—Ü—ñ—é –Ω–∞–π–±—ñ–ª—å—à–æ–≥–æ –±—ñ—Ç–∞ (–ø—Ä–µ—Ñ—ñ–∫—Å –Ω—É–ª—ñ–≤)
- **–û—Ü—ñ–Ω–∫–∞ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ–æ—Ä–º—É–ª—É:
  $$E = \alpha_m \cdot m^2 \cdot \left(\sum_{i=1}^m 2^{-R[i]}\right)^{-1}$$
  –¥–µ $m$ --- –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤, $R[i]$ --- –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω—É–ª—ñ–≤ —É $i$-–º—É —Ä–µ–≥—ñ—Å—Ç—Ä—ñ, –∞ $\alpha_m$ --- –∫–æ—Ä–∏–≥—É–≤–∞–ª—å–Ω–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç

#### 1.4 –û–±–º–µ–∂–µ–Ω–Ω—è

- –ê–ª–≥–æ—Ä–∏—Ç–º –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—î —Ç–æ—á–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å, –∞–ª–µ –º–∞—î –Ω–∏–∑—å–∫—É –ø–æ—Ö–∏–±–∫—É ($\approx 1.04 / \sqrt{m}$)
- –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–¥–∞–ª–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤

#### 1.5 –†–µ–∞–ª—å–Ω–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è

- –ê–Ω–∞–ª—ñ–∑ —Ç—Ä–∞—Ñ—ñ–∫—É (–ø—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö IP-–∞–¥—Ä–µ—Å)
- –°–∏—Å—Ç–µ–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π (–æ–±–ª—ñ–∫ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤)
- –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –≤–µ–ª–∏–∫–∏—Ö –¥–∞–Ω–∏—Ö

#### –ó–∞–ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤

- –ß–æ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ö–µ—à—É–≤–∞–Ω–Ω—è, –∞ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î —Å–∞–º—ñ –µ–ª–µ–º–µ–Ω—Ç–∏?
- –Ø–∫ HLL —Å–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –∑ –≤–µ–ª–∏–∫–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–∏—Ö –ø—Ä–∏ —Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ–π –ø–∞–º'—è—Ç—ñ?

### 2. –ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –±–ª–æ–∫ (70 —Ö–≤–∏–ª–∏–Ω)

#### 2.1 –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–æ–≤–æ–≥–æ HyperLogLog (20 —Ö–≤–∏–ª–∏–Ω)

**–ó–∞–≤–¥–∞–Ω–Ω—è:** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –±–∞–∑–æ–≤—É –≤–µ—Ä—Å—ñ—é HLL –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É Python.

``` python
import mmh3  # –î–ª—è —Ö–µ—à—É–≤–∞–Ω–Ω—è
import math

class HyperLogLog:
    def __init__(self, b):
        self.b = b  # –ö—ñ–ª—å–∫—ñ—Å—Ç—å –±—ñ—Ç—ñ–≤ –¥–ª—è —ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—ó
        self.m = 1 << b  # –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤ (2^b)
        self.registers = [0] * self.m

    def add(self, item):
        hash_value = mmh3.hash(item, signed=False)  # –•–µ—à—É–≤–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç–∞
        index = hash_value >> (32 - self.b)  # –ü–µ—Ä—à—ñ b –±—ñ—Ç—ñ–≤
        w = hash_value & ((1 << (32 - self.b)) - 1)  # –†–µ—à—Ç–∞ –±—ñ—Ç—ñ–≤
        leading_zeros = self._count_leading_zeros(w) + 1
        self.registers[index] = max(self.registers[index], leading_zeros)

    def _count_leading_zeros(self, w):
        return len(bin(w)) - len(bin(w).lstrip('0b'))

    def estimate(self):
        harmonic_mean = sum(2 ** -r for r in self.registers)
        raw_estimate = (self.m ** 2) / harmonic_mean
        alpha_m = 0.7213 / (1 + 1.079 / self.m)  # –ö–æ—Ä–∏–≥—É–≤–∞–ª—å–Ω–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç
        return alpha_m * raw_estimate

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
hll = HyperLogLog(10)  # –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ 2^10 —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤
elements = [f"user_{i}" for i in range(1, 10000)]

for elem in elements:
    hll.add(elem)

print("–û—Ü—ñ–Ω–∫–∞ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤:", round(hll.estimate()))
```

**–ó–∞–ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤:**
- –Ø–∫ –∑–º—ñ–Ω–∏—Ç—å—Å—è —Ç–æ—á–Ω—ñ—Å—Ç—å –æ—Ü—ñ–Ω–∫–∏ –ø—Ä–∏ –∑–±—ñ–ª—å—à–µ–Ω–Ω—ñ $b$?
- –ß–∏ –º–æ–∂–ª–∏–≤–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ñ–Ω—à—ñ —Ö–µ—à-—Ñ—É–Ω–∫—Ü—ñ—ó?

#### 2.2 –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ HLL (20 —Ö–≤–∏–ª–∏–Ω)

**–ó–∞–≤–¥–∞–Ω–Ω—è:** –î–æ—Å–ª—ñ–¥–∏—Ç–∏ –≤–ø–ª–∏–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ $b$ –Ω–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å —ñ –æ–±—Å—è–≥ –ø–∞–º'—è—Ç—ñ.

``` python
def analyze_hll_accuracy():
    for b in range(4, 16):
        hll = HyperLogLog(b)
        elements = [f"user_{i}" for i in range(1, 10000)]
        for elem in elements:
            hll.add(elem)
        print(f"b={b}, –†–µ–≥—ñ—Å—Ç—Ä—ñ–≤={hll.m}, –û—Ü—ñ–Ω–∫–∞={round(hll.estimate())}")

analyze_hll_accuracy()
```

**–û–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è:**
- –ß–æ–º—É –±—ñ–ª—å—à–µ —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤ –ø–æ–∫—Ä–∞—â—É—î —Ç–æ—á–Ω—ñ—Å—Ç—å?
- –Ø–∫–∏–π $b$ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è 1 –º—ñ–ª—å–π–æ–Ω–∞ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤?

#### 2.3 –†–µ–∞–ª—å–Ω–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è: –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö IP-–∞–¥—Ä–µ—Å (30 —Ö–≤–∏–ª–∏–Ω)

**–ó–∞–≤–¥–∞–Ω–Ω—è:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ HLL –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö IP-–∞–¥—Ä–µ—Å –∑—ñ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É.

``` python
import random

def generate_ip_addresses(count):
    return [f"{random.randint(1, 255)}.{random.randint(1, 255)}.{random.randint(1, 255)}.{random.randint(1, 255)}" for _ in range(count)]

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
ip_addresses = generate_ip_addresses(100000)
hll = HyperLogLog(12)  # –î–ª—è –≤–µ–ª–∏–∫–æ–≥–æ –ø–æ—Ç–æ–∫—É

for ip in ip_addresses:
    hll.add(ip)

print("–ö—ñ–ª—å–∫—ñ—Å—Ç—å —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö IP-–∞–¥—Ä–µ—Å:", round(hll.estimate()))
```

**–î–æ–¥–∞—Ç–∫–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è:**
- –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ –æ—Ü—ñ–Ω–∫—É HLL —ñ–∑ —Ç–æ—á–Ω–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `set`

**–û–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è:**
- –£ —è–∫–∏—Ö —Å–∏—Ç—É–∞—Ü—ñ—è—Ö –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ HLL –∑–∞–º—ñ—Å—Ç—å —Ç–æ—á–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤?
- –ß–∏ –º–æ–∂–Ω–∞ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ HLL –¥–ª—è –æ–±'—î–¥–Ω–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö –ø–æ—Ç–æ–∫—ñ–≤?

### 3. –†–µ—Ñ–ª–µ–∫—Å—ñ—è —Ç–∞ –æ–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è (10 —Ö–≤–∏–ª–∏–Ω)

1.  –Ø–∫—ñ –ø–µ—Ä–µ–≤–∞–≥–∏ —Ç–∞ –Ω–µ–¥–æ–ª—ñ–∫–∏ HLL –ø–æ—Ä—ñ–≤–Ω—è–Ω–æ —ñ–∑ –∑–≤–∏—á–∞–π–Ω–∏–º –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫–æ–º?
2.  –Ø–∫ –≤–ø–ª–∏–≤–∞—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ –ø–∞–º'—è—Ç—å?
3.  –ß–∏ –º–æ–∂–Ω–∞ –∞–¥–∞–ø—Ç—É–≤–∞—Ç–∏ HLL –¥–ª—è –∑–∞–¥–∞—á —ñ–∑ –≤–∏–¥–∞–ª–µ–Ω–Ω—è–º –µ–ª–µ–º–µ–Ω—Ç—ñ–≤?

## –°–ø–∏—Å–æ–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏—Ö –∫–æ–Ω—Ü–µ–ø—Ü—ñ–π/—Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ–π/—Ç–µ–º –¥–ª—è –¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è

\#related-topics
- **–•–µ—à-—Ñ—É–Ω–∫—Ü—ñ—ó:** –†–æ–∑–≥–ª—è–¥ —Ä—ñ–∑–Ω–∏—Ö –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ (MurmurHash, SHA-256)
- **Linear Counting:** –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –º–µ—Ç–æ–¥ –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
- **–ö–æ–º–±—ñ–Ω–∞—Ü—ñ—è HLL —ñ–∑ —ñ–Ω—à–∏–º–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º–∏:** –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–∞–∑–æ–º —ñ–∑ Count-Min Sketch
- **–í–µ–ª–∏–∫—ñ –¥–∞–Ω—ñ:** –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è HLL —É —Ö–º–∞—Ä–Ω–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Redis HyperLogLog)
- **–û–±'—î–¥–Ω–∞–Ω–Ω—è HLL:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –æ–±'—î–¥–Ω–∞–Ω–Ω—è –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö

## –î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è

### 1. –¢–µ–æ—Ä–µ—Ç–∏—á–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è

- –î–æ–≤–µ–¥—ñ—Ç—å, —á–æ–º—É HLL –º–∞—î –ø–æ—Ö–∏–±–∫—É $\approx 1.04 / \sqrt{m}$
- –Ø–∫ –º–æ–∂–Ω–∞ –ø–æ–∫—Ä–∞—â–∏—Ç–∏ —Ç–æ—á–Ω—ñ—Å—Ç—å HLL –±–µ–∑ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤?

### 2. –ü—Ä–∞–∫—Ç–∏—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è

- –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –º–µ—Ç–æ–¥ –æ–±'—î–¥–Ω–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö HLL-—Å—Ç—Ä—É–∫—Ç—É—Ä
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ HLL –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É —Ä–µ–∞–ª—å–Ω–æ–º—É –Ω–∞–±–æ—Ä—ñ –¥–∞–Ω–∏—Ö (–Ω–∞–ø—Ä., CSV-—Ñ–∞–π–ª)

\#homework \#practice \#theory

# Blended

## –î–µ—Ç–∞–ª—å–Ω–µ –∑–∞–Ω—è—Ç—Ç—è –Ω–∞ —Ç–µ–º—É "HyperLogLog"

\#algorithms \#data-structures \#computer-science \#hyperloglog \#big-data \#probability \#cardinality-estimation

## –¶—ñ–ª—å –∑–∞–Ω—è—Ç—Ç—è

- –û–∑–Ω–∞–π–æ–º–∏—Ç–∏ —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ —ñ–∑ –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º HyperLogLog (HLL) –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –ø–æ—Ç–æ—Ü—ñ –¥–∞–Ω–∏—Ö
- –†–æ–∑–≥–ª—è–Ω—É—Ç–∏ —Ç–µ–æ—Ä–µ—Ç–∏—á–Ω—É –æ—Å–Ω–æ–≤—É, –∫–ª—é—á–æ–≤—ñ –∫–æ–Ω—Ü–µ–ø—Ü—ñ—ó —Ç–∞ –ø—Ä–∞–∫—Ç–∏—á–Ω—É —ñ–º–ø–ª–µ–º–µ–Ω—Ç–∞—Ü—ñ—é
- –ù–∞–≤—á–∏—Ç–∏ –∑–∞—Å—Ç–æ—Å–æ–≤—É–≤–∞—Ç–∏ HLL –¥–ª—è –∑–∞–¥–∞—á —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Å–≤—ñ—Ç—É —Ç–∞ –µ—Ñ–µ–∫—Ç–∏–≤–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤—É–≤–∞—Ç–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ –∞–ª–≥–æ—Ä–∏—Ç–º—É

## –ü–ª–∞–Ω –∑–∞–Ω—è—Ç—Ç—è

### 1. –¢–µ–æ—Ä–µ—Ç–∏—á–Ω–∏–π –±–ª–æ–∫ (15 —Ö–≤–∏–ª–∏–Ω)

#### 1.1 –©–æ —Ç–∞–∫–µ HyperLogLog?

- HyperLogLog --- —Ü–µ –∞–ª–≥–æ—Ä–∏—Ç–º, –ø—Ä–∏–∑–Ω–∞—á–µ–Ω–∏–π –¥–ª—è –ø—Ä–∏–±–ª–∏–∑–Ω–æ–≥–æ –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É –≤–µ–ª–∏–∫–æ–º—É –ø–æ—Ç–æ—Ü—ñ –¥–∞–Ω–∏—Ö
- –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ—ñ–∫—Å–æ–≤–∞–Ω–∏–π –æ–±—Å—è–≥ –ø–∞–º'—è—Ç—ñ, –Ω–µ–∑–∞–ª–µ–∂–Ω–æ –≤—ñ–¥ —Ä–æ–∑–º—ñ—Ä—É –≤—Ö—ñ–¥–Ω–∏—Ö –¥–∞–Ω–∏—Ö

#### 1.2 –û—Å–Ω–æ–≤–Ω–∞ —ñ–¥–µ—è –∞–ª–≥–æ—Ä–∏—Ç–º—É

- –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ö–µ—à-—Ñ—É–Ω–∫—Ü—ñ–π –¥–ª—è —Ä—ñ–≤–Ω–æ–º—ñ—Ä–Ω–æ–≥–æ —Ä–æ–∑–ø–æ–¥—ñ–ª—É –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
- –ó–∞–ø–∏—Å –∑–Ω–∞—á–µ–Ω—å —É "—Ä–µ–≥—ñ—Å—Ç—Ä–∞—Ö" –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –≤–∏–∑–Ω–∞—á–µ–Ω–Ω—è –Ω–∞–π–±—ñ–ª—å—à–æ–≥–æ –ø–æ—Ä—è–¥–∫—É –Ω—É–ª—ñ–≤ —É —Ö–µ—à–æ–≤–∞–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω–Ω—è—Ö
- –û—Ü—ñ–Ω–∫–∞ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —á–µ—Ä–µ–∑ –≥–∞—Ä–º–æ–Ω—ñ–π–Ω–µ —Å–µ—Ä–µ–¥–Ω—î

#### 1.3 –ö–ª—é—á–æ–≤—ñ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∏

- **–•–µ—à-—Ñ—É–Ω–∫—Ü—ñ—è:** –ü–µ—Ä–µ—Ç–≤–æ—Ä—é—î –∫–æ–∂–µ–Ω –µ–ª–µ–º–µ–Ω—Ç —É —á–∏—Å–ª–æ–≤–µ –∑–Ω–∞—á–µ–Ω–Ω—è
- **–†–µ–≥—ñ—Å—Ç—Ä–∏:** –ú–∞—Å–∏–≤, —è–∫–∏–π –∑–±–µ—Ä—ñ–≥–∞—î –ø–æ–∑–∏—Ü—ñ—é –Ω–∞–π–±—ñ–ª—å—à–æ–≥–æ –±—ñ—Ç–∞ (–ø—Ä–µ—Ñ—ñ–∫—Å –Ω—É–ª—ñ–≤)
- **–û—Ü—ñ–Ω–∫–∞ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ñ–æ—Ä–º—É–ª—É:
  $$E = \alpha_m \cdot m^2 \cdot \left(\sum_{i=1}^m 2^{-R[i]}\right)^{-1}$$
  –¥–µ $m$ --- –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤, $R[i]$ --- –º–∞–∫—Å–∏–º–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –Ω—É–ª—ñ–≤ —É $i$-–º—É —Ä–µ–≥—ñ—Å—Ç—Ä—ñ, –∞ $\alpha_m$ --- –∫–æ—Ä–∏–≥—É–≤–∞–ª—å–Ω–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç

#### 1.4 –û–±–º–µ–∂–µ–Ω–Ω—è

- –ê–ª–≥–æ—Ä–∏—Ç–º –Ω–µ –ø–æ–≤–µ—Ä—Ç–∞—î —Ç–æ—á–Ω—É –∫—ñ–ª—å–∫—ñ—Å—Ç—å —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å, –∞–ª–µ –º–∞—î –Ω–∏–∑—å–∫—É –ø–æ—Ö–∏–±–∫—É ($\approx 1.04 / \sqrt{m}$)
- –ù–µ–º–æ–∂–ª–∏–≤—ñ—Å—Ç—å –≤–∏–¥–∞–ª–µ–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç—ñ–≤

#### 1.5 –†–µ–∞–ª—å–Ω–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è

- –ê–Ω–∞–ª—ñ–∑ —Ç—Ä–∞—Ñ—ñ–∫—É (–ø—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö IP-–∞–¥—Ä–µ—Å)
- –°–∏—Å—Ç–µ–º–∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü—ñ–π (–æ–±–ª—ñ–∫ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤)
- –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –≤–µ–ª–∏–∫–∏—Ö –¥–∞–Ω–∏—Ö

#### –ó–∞–ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤

- –ß–æ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ö–µ—à—É–≤–∞–Ω–Ω—è, –∞ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î —Å–∞–º—ñ –µ–ª–µ–º–µ–Ω—Ç–∏?
- –Ø–∫ HLL —Å–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –∑ –≤–µ–ª–∏–∫–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–∏—Ö –ø—Ä–∏ —Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ–π –ø–∞–º'—è—Ç—ñ?

### 2. –ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –±–ª–æ–∫ (70 —Ö–≤–∏–ª–∏–Ω)

#### 2.1 –†–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –±–∞–∑–æ–≤–æ–≥–æ HyperLogLog (20 —Ö–≤–∏–ª–∏–Ω)

**–ó–∞–≤–¥–∞–Ω–Ω—è:** –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –±–∞–∑–æ–≤—É –≤–µ—Ä—Å—ñ—é HLL –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É Python.

``` python
import mmh3  # –î–ª—è —Ö–µ—à—É–≤–∞–Ω–Ω—è
import math

class HyperLogLog:
    def __init__(self, b):
        self.b = b  # –ö—ñ–ª—å–∫—ñ—Å—Ç—å –±—ñ—Ç—ñ–≤ –¥–ª—è —ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—ó
        self.m = 1 << b  # –ö—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤ (2^b)
        self.registers = [0] * self.m

    def add(self, item):
        hash_value = mmh3.hash(item, signed=False)  # –•–µ—à—É–≤–∞–Ω–Ω—è –µ–ª–µ–º–µ–Ω—Ç–∞
        index = hash_value >> (32 - self.b)  # –ü–µ—Ä—à—ñ b –±—ñ—Ç—ñ–≤
        w = hash_value & ((1 << (32 - self.b)) - 1)  # –†–µ—à—Ç–∞ –±—ñ—Ç—ñ–≤
        leading_zeros = self._count_leading_zeros(w) + 1
        self.registers[index] = max(self.registers[index], leading_zeros)

    def _count_leading_zeros(self, w):
        return len(bin(w)) - len(bin(w).lstrip('0b'))

    def estimate(self):
        harmonic_mean = sum(2 ** -r for r in self.registers)
        raw_estimate = (self.m ** 2) / harmonic_mean
        alpha_m = 0.7213 / (1 + 1.079 / self.m)  # –ö–æ—Ä–∏–≥—É–≤–∞–ª—å–Ω–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç
        return alpha_m * raw_estimate

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
hll = HyperLogLog(10)  # –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î–º–æ 2^10 —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤
elements = [f"user_{i}" for i in range(1, 10000)]

for elem in elements:
    hll.add(elem)

print("–û—Ü—ñ–Ω–∫–∞ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤:", round(hll.estimate()))
```

**–ó–∞–ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤:**
- –Ø–∫ –∑–º—ñ–Ω–∏—Ç—å—Å—è —Ç–æ—á–Ω—ñ—Å—Ç—å –æ—Ü—ñ–Ω–∫–∏ –ø—Ä–∏ –∑–±—ñ–ª—å—à–µ–Ω–Ω—ñ $b$?
- –ß–∏ –º–æ–∂–ª–∏–≤–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ñ–Ω—à—ñ —Ö–µ—à-—Ñ—É–Ω–∫—Ü—ñ—ó?

#### 2.2 –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è –ø–∞—Ä–∞–º–µ—Ç—Ä—ñ–≤ HLL (20 —Ö–≤–∏–ª–∏–Ω)

**–ó–∞–≤–¥–∞–Ω–Ω—è:** –î–æ—Å–ª—ñ–¥–∏—Ç–∏ –≤–ø–ª–∏–≤ –ø–∞—Ä–∞–º–µ—Ç—Ä–∞ $b$ –Ω–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å —ñ –æ–±—Å—è–≥ –ø–∞–º'—è—Ç—ñ.

``` python
def analyze_hll_accuracy():
    for b in range(4, 16):
        hll = HyperLogLog(b)
        elements = [f"user_{i}" for i in range(1, 10000)]
        for elem in elements:
            hll.add(elem)
        print(f"b={b}, –†–µ–≥—ñ—Å—Ç—Ä—ñ–≤={hll.m}, –û—Ü—ñ–Ω–∫–∞={round(hll.estimate())}")

analyze_hll_accuracy()
```

**–û–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è:**
- –ß–æ–º—É –±—ñ–ª—å—à–µ —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤ –ø–æ–∫—Ä–∞—â—É—î —Ç–æ—á–Ω—ñ—Å—Ç—å?
- –Ø–∫–∏–π $b$ –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è 1 –º—ñ–ª—å–π–æ–Ω–∞ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤?

#### 2.3 –†–µ–∞–ª—å–Ω–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è: –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö IP-–∞–¥—Ä–µ—Å (30 —Ö–≤–∏–ª–∏–Ω)

**–ó–∞–≤–¥–∞–Ω–Ω—è:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ HLL –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö IP-–∞–¥—Ä–µ—Å –∑—ñ –∑–≥–µ–Ω–µ—Ä–æ–≤–∞–Ω–æ–≥–æ –ø–æ—Ç–æ–∫—É.

``` python
import random

def generate_ip_addresses(count):
    return [f"{random.randint(1, 255)}.{random.randint(1, 255)}.{random.randint(1, 255)}.{random.randint(1, 255)}" for _ in range(count)]

# –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è
ip_addresses = generate_ip_addresses(100000)
hll = HyperLogLog(12)  # –î–ª—è –≤–µ–ª–∏–∫–æ–≥–æ –ø–æ—Ç–æ–∫—É

for ip in ip_addresses:
    hll.add(ip)

print("–ö—ñ–ª—å–∫—ñ—Å—Ç—å —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö IP-–∞–¥—Ä–µ—Å:", round(hll.estimate()))
```

**–î–æ–¥–∞—Ç–∫–æ–≤–µ –∑–∞–≤–¥–∞–Ω–Ω—è:**
- –ü–æ—Ä—ñ–≤–Ω—è—Ç–∏ –æ—Ü—ñ–Ω–∫—É HLL —ñ–∑ —Ç–æ—á–Ω–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é `set`

**–û–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è:**
- –£ —è–∫–∏—Ö —Å–∏—Ç—É–∞—Ü—ñ—è—Ö –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ HLL –∑–∞–º—ñ—Å—Ç—å —Ç–æ—á–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤?
- –ß–∏ –º–æ–∂–Ω–∞ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ HLL –¥–ª—è –æ–±'—î–¥–Ω–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö –ø–æ—Ç–æ–∫—ñ–≤?

### 3. –†–µ—Ñ–ª–µ–∫—Å—ñ—è —Ç–∞ –æ–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è (10 —Ö–≤–∏–ª–∏–Ω)

1.  –Ø–∫—ñ –ø–µ—Ä–µ–≤–∞–≥–∏ —Ç–∞ –Ω–µ–¥–æ–ª—ñ–∫–∏ HLL –ø–æ—Ä—ñ–≤–Ω—è–Ω–æ —ñ–∑ –∑–≤–∏—á–∞–π–Ω–∏–º –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫–æ–º?
2.  –Ø–∫ –≤–ø–ª–∏–≤–∞—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ –ø–∞–º'—è—Ç—å?
3.  –ß–∏ –º–æ–∂–Ω–∞ –∞–¥–∞–ø—Ç—É–≤–∞—Ç–∏ HLL –¥–ª—è –∑–∞–¥–∞—á —ñ–∑ –≤–∏–¥–∞–ª–µ–Ω–Ω—è–º –µ–ª–µ–º–µ–Ω—Ç—ñ–≤?

## –°–ø–∏—Å–æ–∫ —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω–∏—Ö –∫–æ–Ω—Ü–µ–ø—Ü—ñ–π/—Ç–µ—Ö–Ω–æ–ª–æ–≥—ñ–π/—Ç–µ–º –¥–ª—è –¥–æ–ø–æ–≤–Ω–µ–Ω–Ω—è

\#related-topics
- **–•–µ—à-—Ñ—É–Ω–∫—Ü—ñ—ó:** –†–æ–∑–≥–ª—è–¥ —Ä—ñ–∑–Ω–∏—Ö –≤–∞—Ä—ñ–∞–Ω—Ç—ñ–≤ (MurmurHash, SHA-256)
- **Linear Counting:** –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –º–µ—Ç–æ–¥ –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
- **–ö–æ–º–±—ñ–Ω–∞—Ü—ñ—è HLL —ñ–∑ —ñ–Ω—à–∏–º–∏ –∞–ª–≥–æ—Ä–∏—Ç–º–∞–º–∏:** –ù–∞–ø—Ä–∏–∫–ª–∞–¥, –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è —Ä–∞–∑–æ–º —ñ–∑ Count-Min Sketch
- **–í–µ–ª–∏–∫—ñ –¥–∞–Ω—ñ:** –ó–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è HLL —É —Ö–º–∞—Ä–Ω–∏—Ö –ø–ª–∞—Ç—Ñ–æ—Ä–º–∞—Ö (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, Redis HyperLogLog)
- **–û–±'—î–¥–Ω–∞–Ω–Ω—è HLL:** –í–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ –æ–±'—î–¥–Ω–∞–Ω–Ω—è –¥–ª—è –∞–≥—Ä–µ–≥–∞—Ü—ñ—ó –¥–∞–Ω–∏—Ö

## –î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è

### 1. –¢–µ–æ—Ä–µ—Ç–∏—á–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è

- –î–æ–≤–µ–¥—ñ—Ç—å, —á–æ–º—É HLL –º–∞—î –ø–æ—Ö–∏–±–∫—É $\approx 1.04 / \sqrt{m}$
- –Ø–∫ –º–æ–∂–Ω–∞ –ø–æ–∫—Ä–∞—â–∏—Ç–∏ —Ç–æ—á–Ω—ñ—Å—Ç—å HLL –±–µ–∑ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤?

### 2. –ü—Ä–∞–∫—Ç–∏—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è

- –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –º–µ—Ç–æ–¥ –æ–±'—î–¥–Ω–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö HLL-—Å—Ç—Ä—É–∫—Ç—É—Ä
- –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ HLL –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É —Ä–µ–∞–ª—å–Ω–æ–º—É –Ω–∞–±–æ—Ä—ñ –¥–∞–Ω–∏—Ö (–Ω–∞–ø—Ä., CSV-—Ñ–∞–π–ª)

\#homework \#practice \#theory

# Questions

## List

**–¢–µ–æ—Ä–µ—Ç–∏—á–Ω–∏–π –±–ª–æ–∫:**

- –ß–æ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ö–µ—à—É–≤–∞–Ω–Ω—è, –∞ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î —Å–∞–º—ñ –µ–ª–µ–º–µ–Ω—Ç–∏?
- –Ø–∫ HLL —Å–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –∑ –≤–µ–ª–∏–∫–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–∏—Ö –ø—Ä–∏ —Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ–π –ø–∞–º'—è—Ç—ñ?

**–ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –±–ª–æ–∫ (–ó–∞–ø–∏—Ç–∞–Ω–Ω—è –¥–ª—è —Å—Ç—É–¥–µ–Ω—Ç—ñ–≤ –¥–æ –ø–µ—Ä—à–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è):**

- –Ø–∫ –∑–º—ñ–Ω–∏—Ç—å—Å—è —Ç–æ—á–Ω—ñ—Å—Ç—å –æ—Ü—ñ–Ω–∫–∏ –ø—Ä–∏ –∑–±—ñ–ª—å—à–µ–Ω–Ω—ñ b?
- –ß–∏ –º–æ–∂–ª–∏–≤–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ñ–Ω—à—ñ —Ö–µ—à-—Ñ—É–Ω–∫—Ü—ñ—ó?

**–ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –±–ª–æ–∫ (–û–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è –¥–æ –¥—Ä—É–≥–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è):**

- –ß–æ–º—É –±—ñ–ª—å—à–µ —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤ –ø–æ–∫—Ä–∞—â—É—î —Ç–æ—á–Ω—ñ—Å—Ç—å?
- –Ø–∫–∏–π b –ø—ñ–¥—Ö–æ–¥–∏—Ç—å –¥–ª—è 1 –º—ñ–ª—å–π–æ–Ω–∞ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤?

**–ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –±–ª–æ–∫ (–û–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è –¥–æ —Ç—Ä–µ—Ç—å–æ–≥–æ –∑–∞–≤–¥–∞–Ω–Ω—è):**

- –£ —è–∫–∏—Ö —Å–∏—Ç—É–∞—Ü—ñ—è—Ö –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ HLL –∑–∞–º—ñ—Å—Ç—å —Ç–æ—á–Ω–∏—Ö –º–µ—Ç–æ–¥—ñ–≤?
- –ß–∏ –º–æ–∂–Ω–∞ –∑–∞—Å—Ç–æ—Å—É–≤–∞—Ç–∏ HLL –¥–ª—è –æ–±'—î–¥–Ω–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö –ø–æ—Ç–æ–∫—ñ–≤?

**–†–µ—Ñ–ª–µ–∫—Å—ñ—è —Ç–∞ –æ–±–≥–æ–≤–æ—Ä–µ–Ω–Ω—è (–ø—ñ—Å–ª—è –ø—Ä–∞–∫—Ç–∏—á–Ω–æ–≥–æ –±–ª–æ–∫—É):**

- –Ø–∫—ñ –ø–µ—Ä–µ–≤–∞–≥–∏ —Ç–∞ –Ω–µ–¥–æ–ª—ñ–∫–∏ HLL –ø–æ—Ä—ñ–≤–Ω—è–Ω–æ —ñ–∑ –∑–≤–∏—á–∞–π–Ω–∏–º –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫–æ–º?
- –Ø–∫ –≤–ø–ª–∏–≤–∞—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤ –Ω–∞ –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —Ç–∞ –ø–∞–º'—è—Ç—å?
- –ß–∏ –º–æ–∂–Ω–∞ –∞–¥–∞–ø—Ç—É–≤–∞—Ç–∏ HLL –¥–ª—è –∑–∞–¥–∞—á —ñ–∑ –≤–∏–¥–∞–ª–µ–Ω–Ω—è–º –µ–ª–µ–º–µ–Ω—Ç—ñ–≤?

**–î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è (–¢–µ–æ—Ä–µ—Ç–∏—á–Ω–µ –ø–∏—Ç–∞–Ω–Ω—è):**

- –î–æ–≤–µ–¥—ñ—Ç—å, —á–æ–º—É HLL –º–∞—î –ø–æ—Ö–∏–±–∫—É ‚âà1.04
- –Ø–∫ –º–æ–∂–Ω–∞ –ø–æ–∫—Ä–∞—â–∏—Ç–∏ —Ç–æ—á–Ω—ñ—Å—Ç—å HLL –±–µ–∑ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤?

**–î–æ–º–∞—à–Ω—î –∑–∞–≤–¥–∞–Ω–Ω—è (–ü—Ä–∞–∫—Ç–∏—á–Ω–µ –∑–∞–≤–¥–∞–Ω–Ω—è):**

- –†–µ–∞–ª—ñ–∑—É–≤–∞—Ç–∏ –º–µ—Ç–æ–¥ –æ–±'—î–¥–Ω–∞–Ω–Ω—è –∫—ñ–ª—å–∫–æ—Ö HLL-—Å—Ç—Ä—É–∫—Ç—É—Ä

- –í–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ HLL –¥–ª—è –ø—ñ–¥—Ä–∞—Ö—É–Ω–∫—É —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤ —É —Ä–µ–∞–ª—å–Ω–æ–º—É –Ω–∞–±–æ—Ä—ñ –¥–∞–Ω–∏—Ö (–Ω–∞–ø—Ä., CSV-—Ñ–∞–π–ª)

- # HyperLogLog: Way Out

\#algorithms \#probabilistic \#cardinality-estimation \#big-data

## –¢–µ–æ—Ä–µ—Ç–∏—á–Ω–∏–π –±–ª–æ–∫

### –ß–æ–º—É –∞–ª–≥–æ—Ä–∏—Ç–º –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ö–µ—à—É–≤–∞–Ω–Ω—è, –∞ –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î —Å–∞–º—ñ –µ–ª–µ–º–µ–Ω—Ç–∏?

\#hashing \#memory-optimization

**–†–æ–∑'—è—Å–Ω–µ–Ω–Ω—è:** HyperLogLog –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î —Ö–µ—à—É–≤–∞–Ω–Ω—è –¥–ª—è –∫–æ–º–ø–∞–∫—Ç–Ω–æ–≥–æ –ø—Ä–µ–¥—Å—Ç–∞–≤–ª–µ–Ω–Ω—è –¥–∞–Ω–∏—Ö, —â–æ –¥–æ–∑–≤–æ–ª—è—î:

1.  **–ó–Ω–∏–∑–∏—Ç–∏ –æ–±—Å—è–≥ –ø–∞–º'—è—Ç—ñ:** –ó–∞–º—ñ—Å—Ç—å –∑–±–µ—Ä—ñ–≥–∞–Ω–Ω—è –≤—Å—ñ—Ö –µ–ª–µ–º–µ–Ω—Ç—ñ–≤, –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –ª–∏—à–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∏ —Ö–µ—à—É–≤–∞–Ω–Ω—è
2.  **–ó–∞–±–µ–∑–ø–µ—á–∏—Ç–∏ —Ä—ñ–≤–Ω–æ–º—ñ—Ä–Ω–∏–π —Ä–æ–∑–ø–æ–¥—ñ–ª:** –•–µ—à—É–≤–∞–Ω–Ω—è —Ä–æ–∑–ø–æ–¥—ñ–ª—è—î –µ–ª–µ–º–µ–Ω—Ç–∏ –ø–æ —Ä–µ–≥—ñ—Å—Ç—Ä–∞—Ö, –¥–æ–∑–≤–æ–ª—è—é—á–∏ —Ç–æ—á–Ω–æ –æ—Ü—ñ–Ω—é–≤–∞—Ç–∏ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å

**–†–µ–∞–ª—å–Ω–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è:**
- –ü—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤ –Ω–∞ –≤–µ–±-—Å–∞–π—Ç–∞—Ö
- –ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥ –º–µ—Ä–µ–∂–µ–≤–æ–≥–æ —Ç—Ä–∞—Ñ—ñ–∫—É –¥–ª—è —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö IP-–∞–¥—Ä–µ—Å

**–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó:**
- **Redis HyperLogLog:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î –≤–±—É–¥–æ–≤–∞–Ω—ñ —Ö–µ—à-—Ñ—É–Ω–∫—Ü—ñ—ó –¥–ª—è —Ä–æ–±–æ—Ç–∏ –∑ –≤–µ–ª–∏–∫–∏–º–∏ –º–Ω–æ–∂–∏–Ω–∞–º–∏
- **BigQuery:** –ó–∞—Å—Ç–æ—Å–æ–≤—É—î HLL –¥–ª—è –æ–ø—Ç–∏–º—ñ–∑–∞—Ü—ñ—ó –∑–∞–ø–∏—Ç—ñ–≤ –¥–æ –≤–µ–ª–∏–∫–∏—Ö —Ç–∞–±–ª–∏—Ü—å

### –Ø–∫ HLL —Å–ø—Ä–∞–≤–ª—è—î—Ç—å—Å—è –∑ –≤–µ–ª–∏–∫–∏–º–∏ –ø–æ—Ç–æ–∫–∞–º–∏ –¥–∞–Ω–∏—Ö –ø—Ä–∏ —Ñ—ñ–∫—Å–æ–≤–∞–Ω—ñ–π –ø–∞–º'—è—Ç—ñ?

\#streaming \#memory-efficiency

**–†–æ–∑'—è—Å–Ω–µ–Ω–Ω—è:** HyperLogLog –ø—Ä–∞—Ü—é—î –∑ —Ñ—ñ–∫—Å–æ–≤–∞–Ω–æ—é –∫—ñ–ª—å–∫—ñ—Å—Ç—é —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤ ($m = 2^b$), —â–æ –¥–æ–∑–≤–æ–ª—è—î –æ–±—Ä–æ–±–ª—è—Ç–∏ –≤–µ–ª–∏–∫—ñ –ø–æ—Ç–æ–∫–∏ –¥–∞–Ω–∏—Ö –±–µ–∑ –∑–±—ñ–ª—å—à–µ–Ω–Ω—è –ø–∞–º'—è—Ç—ñ. –•–µ—à-—Ñ—É–Ω–∫—Ü—ñ—ó –ø–µ—Ä–µ–≤–æ–¥—è—Ç—å –µ–ª–µ–º–µ–Ω—Ç–∏ –≤ 32-–±—ñ—Ç–Ω—ñ —á–∏—Å–ª–∞, —è–∫—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å—Å—è –¥–ª—è –æ–Ω–æ–≤–ª–µ–Ω–Ω—è —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤.

**–†–µ–∞–ª—å–Ω–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è:**
- –°–∏—Å—Ç–µ–º–∏ –ø–æ—Ç–æ–∫–æ–≤–æ—ó –æ–±—Ä–æ–±–∫–∏ –¥–∞–Ω–∏—Ö (Apache Flink, Kafka Streams) –¥–ª—è –æ—Ü—ñ–Ω–∫–∏ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –ø–æ–¥—ñ–π —É —Ä–µ–∞–ª—å–Ω–æ–º—É —á–∞—Å—ñ

**–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó:**
- **Apache Druid:** –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î HLL –¥–ª—è –æ–±—á–∏—Å–ª–µ–Ω–Ω—è –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ —É –≤–µ–ª–∏–∫–∏—Ö –ø–æ—Ç–æ–∫–∞—Ö –∞–Ω–∞–ª—ñ—Ç–∏—á–Ω–∏—Ö –¥–∞–Ω–∏—Ö

## –ü—Ä–∞–∫—Ç–∏—á–Ω–∏–π –±–ª–æ–∫

### –Ø–∫ –∑–º—ñ–Ω–∏—Ç—å—Å—è —Ç–æ—á–Ω—ñ—Å—Ç—å –æ—Ü—ñ–Ω–∫–∏ –ø—Ä–∏ –∑–±—ñ–ª—å—à–µ–Ω–Ω—ñ $b$?

\#accuracy \#parameter-tuning

**–†–æ–∑'—è—Å–Ω–µ–Ω–Ω—è:** –ó–±—ñ–ª—å—à–µ–Ω–Ω—è $b$ (–∫—ñ–ª—å–∫–æ—Å—Ç—ñ –±—ñ—Ç—ñ–≤ –¥–ª—è —ñ–Ω–¥–µ–∫—Å–∞—Ü—ñ—ó) –∑–±—ñ–ª—å—à—É—î –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤ ($m = 2^b$), —â–æ –∑–º–µ–Ω—à—É—î –ø–æ—Ö–∏–±–∫—É –æ—Ü—ñ–Ω–∫–∏. –ü–æ—Ö–∏–±–∫–∞ –∞–ª–≥–æ—Ä–∏—Ç–º—É –æ–±–µ—Ä–Ω–µ–Ω–æ –ø—Ä–æ–ø–æ—Ä—Ü—ñ–π–Ω–∞ $\sqrt{m}$:

$$\text{–ü–æ—Ö–∏–±–∫–∞} \approx \frac{1.04}{\sqrt{m}}$$

**–†–µ–∞–ª—å–Ω–µ –∑–∞—Å—Ç–æ—Å—É–≤–∞–Ω–Ω—è:**
- –ü—Ä–∏ —Ä–æ–±–æ—Ç—ñ –∑ –¥—É–∂–µ –≤–µ–ª–∏–∫–∏–º–∏ –º–Ω–æ–∂–∏–Ω–∞–º–∏ –¥–∞–Ω–∏—Ö, –Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –ø—ñ–¥—Ä–∞—Ö—É–Ω–æ–∫ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –≤—ñ–¥–≤—ñ–¥—É–≤–∞—á—ñ–≤ —É –º–∞—Å—à—Ç–∞–±–Ω–∏—Ö —Ä–µ–∫–ª–∞–º–Ω–∏—Ö –∫–∞–º–ø–∞–Ω—ñ—è—Ö

### –ß–∏ –º–æ–∂–ª–∏–≤–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ —ñ–Ω—à—ñ —Ö–µ—à-—Ñ—É–Ω–∫—Ü—ñ—ó?

\#hash-functions \#implementation

**–†–æ–∑'—è—Å–Ω–µ–Ω–Ω—è:** –¢–∞–∫, –º–æ–∂–ª–∏–≤–æ. –í–∏–±—ñ—Ä —Ö–µ—à-—Ñ—É–Ω–∫—Ü—ñ—ó –≤–ø–ª–∏–≤–∞—î –Ω–∞ —Ä—ñ–≤–Ω–æ–º—ñ—Ä–Ω—ñ—Å—Ç—å —Ä–æ–∑–ø–æ–¥—ñ–ª—É –¥–∞–Ω–∏—Ö. –î–ª—è HLL –≤–∞–∂–ª–∏–≤–æ, —â–æ–± —Ö–µ—à-—Ñ—É–Ω–∫—Ü—ñ—è:

1.  **–ú–∞–ª–∞ —Ö–æ—Ä–æ—à—ñ —Å—Ç–æ—Ö–∞—Å—Ç–∏—á–Ω—ñ –≤–ª–∞—Å—Ç–∏–≤–æ—Å—Ç—ñ**
2.  **–ù–µ —Å—Ç–≤–æ—Ä—é–≤–∞–ª–∞ –∫–æ–ª—ñ–∑—ñ–π**

**–¢–µ—Ö–Ω–æ–ª–æ–≥—ñ—ó:**
- **Python libraries:** `mmh3` (MurmurHash), `hashlib` (SHA-256)

### –î–æ–≤–µ–¥–µ–Ω–Ω—è –ø–æ—Ö–∏–±–∫–∏ HLL

\#mathematical-proof \#error-analysis

–ü–æ—Ö–∏–±–∫–∞ HLL –≤–∏–∑–Ω–∞—á–∞—î—Ç—å—Å—è —Ñ–æ—Ä–º—É–ª–æ—é:
$$\text{–ü–æ—Ö–∏–±–∫–∞} = \Theta\left(\frac{1}{\sqrt{m}}\right)$$

**–î–æ–≤–µ–¥–µ–Ω–Ω—è:**
1. –§–æ—Ä–º—É–ª–∞ –æ—Ü—ñ–Ω–∫–∏ –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ:
$$E = \alpha_m \cdot m^2 \cdot \left(\sum_{i=1}^m 2^{-R[i]}\right)^{-1}$$
–¥–µ $\alpha_m$ --- –∫–æ—Ä–∏–≥—É–≤–∞–ª—å–Ω–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç

2.  –ï–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–∞–ª—å–Ω–æ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ, —â–æ –æ–ø—Ç–∏–º–∞–ª—å–Ω–∏–π –∫–æ–µ—Ñ—ñ—Ü—ñ—î–Ω—Ç –¥–æ—Ä—ñ–≤–Ω—é—î 1.04

### –ü—Ä–∞–∫—Ç–∏—á–Ω–∞ —Ä–µ–∞–ª—ñ–∑–∞—Ü—ñ—è –æ–±'—î–¥–Ω–∞–Ω–Ω—è HLL-—Å—Ç—Ä—É–∫—Ç—É—Ä

``` python
class HyperLogLog:
    def merge(self, other_hll):
        """
        –û–±'—î–¥–Ω—É—î –¥–≤–∞ HyperLogLog –ª—ñ—á–∏–ª—å–Ω–∏–∫–∏.
        
        Args:
            other_hll: –Ü–Ω—à–∏–π HyperLogLog –¥–ª—è –æ–±'—î–¥–Ω–∞–Ω–Ω—è
            
        Raises:
            ValueError: –Ø–∫—â–æ —Ä–æ–∑–º—ñ—Ä–∏ —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤ –Ω–µ –∑–±—ñ–≥–∞—é—Ç—å—Å—è
        """
        if self.m != other_hll.m:
            raise ValueError("–†–æ–∑–º—ñ—Ä —Ä–µ–≥—ñ—Å—Ç—Ä—ñ–≤ –º–∞—î –∑–±—ñ–≥–∞—Ç–∏—Å—è")
            
        self.registers = [
            max(self.registers[i], other_hll.registers[i]) 
            for i in range(self.m)
        ]
```

### –û–±—Ä–æ–±–∫–∞ —Ä–µ–∞–ª—å–Ω–∏—Ö –¥–∞–Ω–∏—Ö –∑ CSV

``` python
import csv

def analyze_unique_values(file_path: str, column_name: str, precision: int = 12) -> int:
    """
    –ê–Ω–∞–ª—ñ–∑—É—î —É–Ω—ñ–∫–∞–ª—å–Ω—ñ –∑–Ω–∞—á–µ–Ω–Ω—è –≤ CSV —Ñ–∞–π–ª—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—á–∏ HyperLogLog.
    
    Args:
        file_path: –®–ª—è—Ö –¥–æ CSV —Ñ–∞–π–ª—É
        column_name: –ù–∞–∑–≤–∞ –∫–æ–ª–æ–Ω–∫–∏ –¥–ª—è –∞–Ω–∞–ª—ñ–∑—É
        precision: –¢–æ—á–Ω—ñ—Å—Ç—å HLL (–∫—ñ–ª—å–∫—ñ—Å—Ç—å –±—ñ—Ç—ñ–≤)
    
    Returns:
        int: –û—Ü—ñ–Ω–∫–∞ –∫—ñ–ª—å–∫–æ—Å—Ç—ñ —É–Ω—ñ–∫–∞–ª—å–Ω–∏—Ö –∑–Ω–∞—á–µ–Ω—å
    """
    hll = HyperLogLog(precision)
    
    with open(file_path, 'r') as file:
        reader = csv.DictReader(file)
        for row in reader:
            hll.add(row[column_name])
            
    return round(hll.estimate())
```

## –ü—ñ–¥—Å—É–º–æ–∫

HyperLogLog —î –ø–æ—Ç—É–∂–Ω–∏–º –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º –¥–ª—è –æ—Ü—ñ–Ω–∫–∏ –∫–∞—Ä–¥–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—ñ –º–Ω–æ–∂–∏–Ω –∑ —Ç–∞–∫–∏–º–∏ –∫–ª—é—á–æ–≤–∏–º–∏ –ø–µ—Ä–µ–≤–∞–≥–∞–º–∏:

1.  –§—ñ–∫—Å–æ–≤–∞–Ω–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–∞–º'—è—Ç—ñ
2.  –í–∏—Å–æ–∫–∞ —Ç–æ—á–Ω—ñ—Å—Ç—å –æ—Ü—ñ–Ω–∫–∏
3.  –ú–æ–∂–ª–∏–≤—ñ—Å—Ç—å –æ–±'—î–¥–Ω–∞–Ω–Ω—è —Å—Ç—Ä—É–∫—Ç—É—Ä
4.  –ï—Ñ–µ–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å —É —Ä–æ–∑–ø–æ–¥—ñ–ª–µ–Ω–∏—Ö —Å–∏—Å—Ç–µ–º–∞—Ö

\#hyperloglog \#algorithms \#big-data \#streaming \#probabilistic-algorithms \#data-structures \#distributed-computing
